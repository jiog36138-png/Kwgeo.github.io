<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´‘ìš´ëŒ€í•™êµ ë§›ì§‘ ì¶”ì²œ - KW EATS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* [Design System] Kwangwoon University Theme */
        :root {
            --primary-color: #8a1525;  /* ê´‘ìš´ëŒ€ ë²„ê±´ë”” */
            --primary-hover: #6b101d;
            --bg-color: #f8f9fa;       /* ë°°ê²½ìƒ‰: ì•„ì£¼ ì—°í•œ íšŒìƒ‰ */
            --card-bg: #ffffff;        /* ì¹´ë“œ ë°°ê²½: í°ìƒ‰ */
            --text-main: #333333;
            --text-sub: #666666;
            --border-color: #e0e0e0;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --radius: 12px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Noto Sans KR', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .app-container {
            background: var(--card-bg);
            width: 100%;
            max-width: 480px; /* ëª¨ë°”ì¼ ë·° ìµœì í™” */
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        /* ìƒë‹¨ í—¤ë” */
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem;
            text-align: center;
        }
        .header h1 {
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ì½˜í…ì¸  ì˜ì—­ */
        .content {
            padding: 2rem;
        }
        
        .page-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 2rem;
        }

        /* í¼ ê·¸ë£¹ ê³µí†µ */
        .form-group {
            margin-bottom: 1.8rem;
        }

        .form-label {
            display: block;
            font-weight: 700;
            margin-bottom: 0.8rem;
            color: var(--text-main);
            font-size: 0.95rem;
        }

        /* 1. ë°°ê³ í”” ì •ë„ (Slider) */
        .range-container {
            position: relative;
            padding: 0 5px;
        }
        input[type=range] {
            width: 100%;
            height: 6px;
            background: #ddd;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .hunger-value {
            text-align: right;
            font-size: 0.85rem;
            color: var(--text-sub);
            margin-top: 5px;
        }

        /* 2, 3, 5. ì„ íƒ ì¹© (Chips UI) */
        .chip-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .chip-input {
            display: none;
        }

        .chip-label {
            padding: 8px 16px;
            background-color: #fff;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--text-sub);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* ì„ íƒë˜ì—ˆì„ ë•Œ ìŠ¤íƒ€ì¼ */
        .chip-input:checked + .chip-label {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(138, 21, 37, 0.3);
        }

        .chip-label:hover {
            border-color: var(--primary-color);
        }

        /* 4. ê°€ê²©ëŒ€ (Input) */
        .input-group {
            position: relative;
        }
        .input-field {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Noto Sans KR', sans-serif;
            outline: none;
            transition: border-color 0.3s;
        }
        .input-field:focus {
            border-color: var(--primary-color);
        }
        .unit {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-sub);
            font-size: 0.9rem;
        }

        /* ë²„íŠ¼ */
        .btn-submit {
            width: 100%;
            padding: 16px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 1rem;
        }
        .btn-submit:hover {
            background-color: var(--primary-hover);
        }
        .btn-submit:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* ê²°ê³¼/ìƒíƒœ ë©”ì‹œì§€ */
        #statusMessage {
            margin-top: 15px;
            text-align: center;
            font-size: 0.9rem;
            min-height: 20px;
        }
        
        /* ê²°ê³¼ ì¹´ë“œ ë””ìì¸ */
        #resultsContainer {
            margin-top: 30px;
        }
        .result-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }
        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .result-card h3 {
            color: var(--primary-color);
            margin-bottom: 5px;
            font-size: 1.1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .result-card .rating {
            font-weight: 700;
            color: #f9a825;
            font-size: 0.9rem;
        }
        .result-card p {
            font-size: 0.9rem;
            color: var(--text-sub);
            margin-bottom: 5px;
            line-height: 1.4;
        }
        
        /* ì§€ë„ ë²„íŠ¼ ê·¸ë£¹ */
        .map-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        .map-btn {
            flex: 1;
            padding: 8px;
            font-size: 0.85rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: #fff;
            color: #333;
            text-decoration: none;
            text-align: center;
            transition: all 0.2s;
        }
        .map-btn.naver { border-color: #03C75A; color: #03C75A; }
        .map-btn.naver:hover { background: #03C75A; color: white; }
        
        .map-btn.google { border-color: #4285F4; color: #4285F4; }
        .map-btn.google:hover { background: #4285F4; color: white; }

    </style>
</head>
<body>

    <div class="app-container">
        <header class="header">
            <h1>KWANGWOON UNIV. EATS</h1>
        </header>

        <div class="content">
            <h2 class="page-title">ê´‘ìš´ëŒ€í•™êµ ë§›ì§‘ ì¶”ì²œ</h2>

            <form id="recommendForm" onsubmit="event.preventDefault(); register();">
                
                <div class="form-group">
                    <label class="form-label">ë°°ê³ í”” ì •ë„</label>
                    <div class="range-container">
                        <input type="range" id="hunger" min="0" max="100" value="50" oninput="updateHunger(this.value)">
                    </div>
                    <div class="hunger-value">í˜„ì¬ ìƒíƒœ: <span id="hungerText">50</span>%</div>
                </div>

                <div class="form-group">
                    <label class="form-label">ì‹ì‚¬ ì‹œê°„</label>
                    <div class="chip-group">
                        <input type="radio" name="mealTime" id="time1" value="ì•„ì¹¨" class="chip-input">
                        <label for="time1" class="chip-label">ì•„ì¹¨</label>

                        <input type="radio" name="mealTime" id="time2" value="ì ì‹¬" class="chip-input" checked>
                        <label for="time2" class="chip-label">ì ì‹¬</label>

                        <input type="radio" name="mealTime" id="time3" value="ì €ë…" class="chip-input">
                        <label for="time3" class="chip-label">ì €ë…</label>

                        <input type="radio" name="mealTime" id="time4" value="ì•¼ì‹" class="chip-input">
                        <label for="time4" class="chip-label">ì•¼ì‹</label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ì›í•˜ëŠ” ì¢…ë¥˜</label>
                    <div class="chip-group">
                        <input type="radio" name="cuisine" id="food1" value="í•œì‹" class="chip-input" checked>
                        <label for="food1" class="chip-label">í•œì‹</label>

                        <input type="radio" name="cuisine" id="food2" value="ì¤‘ì‹" class="chip-input">
                        <label for="food2" class="chip-label">ì¤‘ì‹</label>

                        <input type="radio" name="cuisine" id="food3" value="ì–‘ì‹" class="chip-input">
                        <label for="food3" class="chip-label">ì–‘ì‹</label>

                        <input type="radio" name="cuisine" id="food4" value="ì¼ì‹" class="chip-input">
                        <label for="food4" class="chip-label">ì¼ì‹</label>

                        <input type="radio" name="cuisine" id="food5" value="ë””ì €íŠ¸" class="chip-input">
                        <label for="food5" class="chip-label">ë””ì €íŠ¸</label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ì˜ˆì‚° (1ì¸ ê¸°ì¤€)</label>
                    <div class="input-group">
                        <input type="number" id="price" class="input-field" value="10000" placeholder="ì˜ˆ: 10000" step="1000">
                        <span class="unit">ì›</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">í•™êµì—ì„œì˜ ê±°ë¦¬ (ë„ë³´)</label>
                    <div class="chip-group">
                        <input type="radio" name="distance" id="dist1" value="5" class="chip-input" checked>
                        <label for="dist1" class="chip-label">5ë¶„ ì´ë‚´</label>

                        <input type="radio" name="distance" id="dist2" value="10" class="chip-input">
                        <label for="dist2" class="chip-label">10ë¶„ ì´ë‚´</label>

                        <input type="radio" name="distance" id="dist3" value="20" class="chip-input">
                        <label for="dist3" class="chip-label">20ë¶„ ì´ë‚´</label>
                    </div>
                </div>

                <button type="submit" class="btn-submit">ì¶”ì²œ ë§›ì§‘ ì°¾ê¸°</button>
            </form>

            <div id="statusMessage"></div>
            <div id="resultsContainer"></div>
        </div>
    </div>

    <script>
        // 1. [DATA] ê´‘ìš´ëŒ€í•™êµ ì£¼ë³€ ì‹¤ì œ ë§›ì§‘ ë°ì´í„°ë² ì´ìŠ¤
        const KW_RESTAURANTS = [
            // í•œì‹
            { name: "ë°¥ì€í™” ê´‘ìš´ëŒ€ì ", cuisine: "í•œì‹", budget: 6000, distance: 3, rating: 4.5, menu: "ì§í™”ì œìœ¡, ì­ˆê¾¸ë¯¸ìˆ™ì£¼" },
            { name: "ìˆ˜ìœ ë¦¬ìš°ë™ì§‘", cuisine: "í•œì‹", budget: 7000, distance: 4, rating: 4.2, menu: "ìš°ë™, ê¹€ë°¥, ë¹„ë¹”êµ­ìˆ˜" },
            { name: "í™”ë¡œìƒíšŒ", cuisine: "í•œì‹", budget: 17500, distance: 7, rating: 4.6, menu: "ë¬´í•œë¦¬í•„ ê³ ê¸°" },
            { name: "ë”ì§„êµ­", cuisine: "í•œì‹", budget: 9000, distance: 5, rating: 4.1, menu: "ìˆ˜ìœ¡êµ­ë°¥" },
            { name: "ë´‰êµ¬ìŠ¤ë°¥ë²„ê±°", cuisine: "í•œì‹", budget: 5000, distance: 2, rating: 4.0, menu: "ë°¥ë²„ê±°" },
            
            // ì¤‘ì‹
            { name: "ì°¨ì´ë‚¨", cuisine: "ì¤‘ì‹", budget: 8000, distance: 5, rating: 4.3, menu: "ì§œì¥ë©´, íƒ•ìˆ˜ìœ¡" },
            { name: "í™ì½©ë°˜ì 0410", cuisine: "ì¤‘ì‹", budget: 7500, distance: 6, rating: 4.1, menu: "ì§¬ë½•, íƒ•ìˆ˜ìœ¡" },
            { name: "ë§ˆë¼íƒ• (íƒ•í™”ì¿µí‘¸)", cuisine: "ì¤‘ì‹", budget: 11000, distance: 5, rating: 4.4, menu: "ë§ˆë¼íƒ•, ê¿”ë°”ë¡œìš°" },

            // ì–‘ì‹
            { name: "ì¬í‚¥", cuisine: "ì–‘ì‹", budget: 12000, distance: 5, rating: 4.7, menu: "ì˜¤ë¯€ë¼ì´ìŠ¤, íŒŒìŠ¤íƒ€" },
            { name: "í”¼ììŠ¤ì¿¨", cuisine: "ì–‘ì‹", budget: 8000, distance: 8, rating: 4.2, menu: "ê³ êµ¬ë§ˆí”¼ì" },
            { name: "ë§˜ìŠ¤í„°ì¹˜ ê´‘ìš´ëŒ€ì ", cuisine: "ì–‘ì‹", budget: 7000, distance: 3, rating: 4.3, menu: "ì‹¸ì´ë²„ê±°" },

            // ì¼ì‹
            { name: "í•˜ì´ë£¨", cuisine: "ì¼ì‹", budget: 9500, distance: 5, rating: 4.5, menu: "ëˆê¹ŒìŠ¤, ê°€ì¸ ë™" },
            { name: "ìŠ¤ì‹œì¤€", cuisine: "ì¼ì‹", budget: 13000, distance: 7, rating: 4.6, menu: "ì´ˆë°¥ ì„¸íŠ¸" },
            { name: "ì—­ì „ìš°ë™0410", cuisine: "ì¼ì‹", budget: 6500, distance: 4, rating: 4.1, menu: "ìš°ë™, ë®ë°¥" },
            { name: "ì§€ì§€ê³ ", cuisine: "ì¼ì‹", budget: 5000, distance: 2, rating: 4.2, menu: "ë‚˜ì´ìŠ¤ë¼ì´ìŠ¤, ëˆ„ë“¤" },

            // ë””ì €íŠ¸/ì¹´í˜
            { name: "ì•„ë§ˆìŠ¤ë¹ˆ", cuisine: "ë””ì €íŠ¸", budget: 4000, distance: 3, rating: 4.5, menu: "ë²„ë¸”í‹°" },
            { name: "ì´ë””ì•¼ì»¤í”¼", cuisine: "ë””ì €íŠ¸", budget: 3500, distance: 2, rating: 4.0, menu: "ì•„ë©”ë¦¬ì¹´ë…¸" },
            { name: "ì™€í”ŒëŒ€í•™", cuisine: "ë””ì €íŠ¸", budget: 4000, distance: 6, rating: 4.4, menu: "ì• í”Œì‹œë‚˜ëª¬ì™€í”Œ" },
        ];

        // ë°°ê³ í”” ìŠ¬ë¼ì´ë” UI ì—…ë°ì´íŠ¸
        function updateHunger(val) {
            document.getElementById('hungerText').innerText = val;
        }

        // ìƒíƒœ ë©”ì‹œì§€ ì¶œë ¥ í•¨ìˆ˜
        function showStatus(msg, isError = false) {
            const el = document.getElementById('statusMessage');
            el.innerText = msg;
            el.style.color = isError ? '#d32f2f' : '#2e7d32'; 
        }

        /**
         * ì‹¤ì œ ì¶”ì²œ ë¡œì§ í•¨ìˆ˜ (Fetch ëŒ€ì‹  ë¡œì»¬ í•„í„°ë§ ì‚¬ìš©)
         */
        function register() {
            // ë²„íŠ¼ ì œì–´
            const submitButton = document.querySelector('.btn-submit');
            
            // 1. ì…ë ¥ê°’ ìˆ˜ì§‘
            const priceVal = document.getElementById('price').value;
            const cuisineVal = document.querySelector('input[name="cuisine"]:checked')?.value;
            const distanceVal = document.querySelector('input[name="distance"]:checked')?.value;
            const hungerVal = document.getElementById('hunger').value; // ì°¸ê³ ìš©

            // ìœ íš¨ì„± ê²€ì‚¬
            if (!priceVal || parseInt(priceVal) <= 0) {
                showStatus("âš ï¸ ì˜ˆì‚°ì„ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.", true);
                document.getElementById('price').focus();
                return;
            }

            // UI ì´ˆê¸°í™”
            const resultsContainer = document.getElementById('resultsContainer');
            resultsContainer.innerHTML = ''; 
            submitButton.disabled = true;
            showStatus("ë§›ì§‘ ë°ì´í„°ë¥¼ ê²€ìƒ‰ì¤‘ì…ë‹ˆë‹¤...");

            // 2. ê°€ìƒì˜ ë¡œë”© ì‹œê°„ (UX) í›„ í•„í„°ë§ ì‹¤í–‰
            setTimeout(() => {
                const userBudget = parseInt(priceVal);
                const userDist = parseInt(distanceVal);

                // [CORE LOGIC] ë°ì´í„° í•„í„°ë§
                // ì¡°ê±´: ì„ íƒí•œ ì¢…ë¥˜ ì¼ì¹˜ AND (ê°€ê²© <= ì˜ˆì‚° OR ì˜¤ì°¨ë²”ìœ„ 1000ì›) AND ê±°ë¦¬ <= ì…ë ¥ê±°ë¦¬
                const recommendations = KW_RESTAURANTS.filter(r => {
                    return r.cuisine === cuisineVal &&
                           r.budget <= (userBudget + 1000) && // ì˜ˆì‚°ë³´ë‹¤ 1000ì› ë¹„ì‹¼ ê²ƒê¹Œì§€ í—ˆìš©
                           r.distance <= userDist;
                });

                // ì¶”ì²œìˆœ ì •ë ¬ (í‰ì  ë†’ì€ ìˆœ)
                recommendations.sort((a, b) => b.rating - a.rating);

                // 3. ê²°ê³¼ ë Œë”ë§
                if (recommendations.length > 0) {
                    showStatus(`âœ… ${recommendations.length}ê°œì˜ ë§›ì§‘ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!`);
                    
                    recommendations.forEach(r => {
                        const card = document.createElement('div');
                        card.className = 'result-card';
                        
                        // ì§€ë„ ê²€ìƒ‰ URL ìƒì„±
                        const query = `ê´‘ìš´ëŒ€ ${r.name}`;
                        const naverMapUrl = `https://map.naver.com/v5/search/${encodeURIComponent(query)}`;
                        const googleMapUrl = `https://www.google.com/maps/search/${encodeURIComponent(query)}`;

                        card.innerHTML = `
                            <h3>${r.name} <span class="rating">â˜… ${r.rating}</span></h3>
                            <p>ğŸ’° í‰ê·  ì˜ˆì‚°: <strong>${r.budget.toLocaleString()}ì›</strong></p>
                            <p>ğŸš¶ ë„ë³´ ê±°ë¦¬: <strong>ì•½ ${r.distance}ë¶„</strong></p>
                            <p>ğŸ½ï¸ ëŒ€í‘œ ë©”ë‰´: ${r.menu}</p>
                            <div class="map-buttons">
                                <a href="${naverMapUrl}" target="_blank" class="map-btn naver">ë„¤ì´ë²„ ì§€ë„</a>
                                <a href="${googleMapUrl}" target="_blank" class="map-btn google">êµ¬ê¸€ ì§€ë„</a>
                            </div>
                        `;
                        resultsContainer.appendChild(card);
                    });

                    // ê²°ê³¼ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                    resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });

                } else {
                    showStatus("ì¡°ê±´ì— ë§ëŠ” ë§›ì§‘ì´ ì—†ìŠµë‹ˆë‹¤. ğŸ˜¢", true);
                    resultsContainer.innerHTML = `
                        <div style="text-align:center; padding: 20px; color: var(--text-sub);">
                            <p>ì„ íƒí•˜ì‹  ì¡°ê±´ì˜ ì‹ë‹¹ì„ ì°¾ì§€ ëª»í–ˆì–´ìš”.</p>
                            <p>ì˜ˆì‚°ì„ ì¡°ê¸ˆ ì˜¬ë¦¬ê±°ë‚˜, ê±°ë¦¬ë¥¼ ëŠ˜ë ¤ë³´ì„¸ìš”!</p>
                        </div>
                    `;
                }

                // ë²„íŠ¼ í™œì„±í™”
                submitButton.disabled = false;

            }, 600); // 0.6ì´ˆ ì§€ì—° íš¨ê³¼
        }
    </script>
</body>
</html>
